<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/template.css') }}">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
</head>
<body>
<div style="font-size:24px;">基本分數(CVSS):</div>
<br>
<div style="font-size:16px;">使用 ChatGPT API 計算問題的基本分數並更新到資料庫</div>
<br>
<form method="post" action="/update_cvss">
    <div>
        <button class="button_bar" type="submit" {{button_status}}>{{button_label}}</button>
    </div>
</form>
<br>
<br>
<br>
<div class="container">
    <div style="font-size:16px;">更新進度: </div>
    <div id="progress-container" class="progress">
        <div id="progress-bar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0"
             aria-valuemin="0" aria-valuemax="100"></div>
        <div id="progress-label" class="progress-label">0%</div>
    </div>
</div>

<script type="text/javascript">
      $(document).ready(function() {
        setInterval(function() {
          $.ajax({
            type: 'GET',
            url: '/process_gpt',
            dataType: 'json',
            success: function(data) {
              $('#progress-bar').css('width', data.value + '%').attr('aria-valuenow', data.progress);
              $('#progress-label').text(data.value + '%');
            }
          });
        }, 10000);
      });

</script>

</body>
</html>